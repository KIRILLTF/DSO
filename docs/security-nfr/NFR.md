# Security Non-Functional Requirements (NFR)

| ID   | Название                   | Описание                                              | Метрика/Порог                               | Проверка (чем/где)                     | Компонент   | Приоритет |
|------|----------------------------|------------------------------------------------------|--------------------------------------------|----------------------------------------|------------|-----------|
| NFR01| Авторизация пользователей   | Все запросы к защищённым эндпоинтам                 | 401 при отсутствии токена                   | Postman/Swagger                        | API/Auth   | High      |
| NFR02| Сложность пароля           | Минимум 8 символов, цифры, спецсимволы             | 8+ символов, 1 цифра, 1 спецсимвол        | Unit-тесты на AuthService              | Backend    | High      |
| NFR03| Хеширование паролей        | Пароли пользователей не хранятся в открытом виде    | bcrypt или Argon2id                         | Проверка в БД                          | Backend    | High      |
| NFR04| JWT срок действия           | Access token действителен ограниченное время        | exp claim <= 60 минут                       | Swagger/Postman, unit-тест             | Backend    | Medium    |
| NFR05| Ограничение доступа к ресурсам | Только владелец или admin может менять item      | 403 при нарушении                           | Unit-тесты CRUD                        | API/Items  | High      |
| NFR06| Логи и трассировка         | Каждое обращение логируется с request_id            | request_id присутствует                     | Логи в формате JSON                     | Logging    | Medium    |
| NFR07| Обработка ошибок           | Структурированные ошибки для API                     | JSON: {code, message, details}             | Swagger/Postman                        | API        | Medium    |
| NFR08| Пагинация и лимиты         | GET /items с limit/offset                            | Максимум limit=100                           | Unit-тесты, нагрузочное тестирование   | API/Items  | Low       |
| NFR09| Защита от IDOR             | Пользователь не может получить чужие item           | 403 при нарушении                           | Unit-тесты, ручное тестирование        | API/Items  | High      |
| NFR10| Валидация данных            | Входные данные проходят проверку по схеме           | Ошибки валидатора возвращают 422           | FastAPI validation, unit-тесты         | API        | Medium    |
